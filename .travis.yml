language: python
python:
- 2.7
- 3.5
- 3.6
install:
- sudo apt-get update
- if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh
  -O miniconda.sh; else wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh
  -O miniconda.sh; fi
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda info -a
- conda create -q -n test-environment python=$TRAVIS_PYTHON_VERSION
- source activate test-environment
- pip install -r requirements.txt
- python setup.py install
script:
- make test
deploy:
  provider: pypi
  user: gmauro
  password:
    secure: VBtR+nnC6XzFoalv2y588UJ5vJ7UMFDbZtRFklKfTah3uWfFAe5HqgsBrAk+qGn5Sy6+tSl7Y1aD/FQUBBWF9EwgmDGlHJZthOsAeBSCFnt6AzYFspyQI8NC6FBvw4pZZrxfCmS/C6BQ7kZoOkl6K0lE9W4z/dCvF4JbdUk973Ta0s3T1KiI4fWvK6CmyTRiFJo39U4KxNwUJVfeEYxhF8lN5gkl2opXT4m2G4IvRzAM9dguNviHyNwkWHZT3nz9azJTNWPnKvWN5xeqKbqwDJJYrIN7+QUJcCUdmUUFpuig8okoznZbYECDuNiR2DWfh2CpbSsQmY21CZUJgSAnvvU/tiHBdr5KEMuKS1cniNAmqC8md23B9SI26ygmXBj13X8fkJbxU9aZnuEyjza69fP6hLc1Z4at7y/aB5HiJ3xR6zz0DTiPJAAS2RKMesWqOxCtk3h4NY4aRLkdKGhT/Rq73VDS3RVIo2SgwWdXdiJd5LmdXqdM3EBDGgj1MykpejC4MtvXYif199TW5pZunZH/kianC52EXjIEybswm29vZCTe4m9oXIPomyViA4hhdAhxMvQet7qMEnpclrcbxZg2+eGTfx9Beux7kco7POIZYRWMHwh1AL6G9aSci4wYfC62M7E98LAGtPrIWNBNkIz+ZdgpFIcSzkN738SEvRQ=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: gmauro/comoda
